<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Patient Dashboard</title>
  <link rel="stylesheet" href="./styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>Healthcare Dashboard</h1>
    <div class="status" id="status">Loading...</div>
  </header>

  <nav class="tabs">
    <button class="tab active" data-tab="patients">Patients</button>
    <button class="tab" data-tab="adverse">Adverse Events</button>
  </nav>

  <main class="container" id="tab-patients">
    <section class="card kpi">
      <h2>Total Patients</h2>
      <div class="kpi-value" id="totalPatients">-</div>
    </section>

    <section class="card">
      <h2>Gender Distribution</h2>
      <canvas id="genderChart" height="140"></canvas>
    </section>

    <section class="card">
      <h2>Age Distribution</h2>
      <canvas id="ageChart" height="140"></canvas>
      <small>Histogram-like view (binned in frontend)</small>
    </section>

    <section class="card wide">
      <h2>Registration Trends (Monthly)</h2>
      <canvas id="regTrendChart" height="140"></canvas>
    </section>

    <section class="card">
      <h2>Top Cities</h2>
      <canvas id="topCitiesChart" height="140"></canvas>
    </section>

    <section class="card">
      <h2>Locale Breakdown</h2>
      <canvas id="localeChart" height="140"></canvas>
    </section>

    <section class="card">
      <h2>Average Age by Country</h2>
      <canvas id="avgAgeCountryChart" height="140"></canvas>
    </section>

    <section class="card">
      <h2>Avg BMI by Marital Status</h2>
      <canvas id="bmiMaritalChart" height="140"></canvas>
    </section>
  </main>

  <main class="container hidden" id="tab-adverse">
    <section class="card kpi kpi-grid">
      <div class="kpi-item">
        <div class="kpi-label">Total Adverse Events</div>
        <div class="kpi-value" id="aeTotal">-</div>
      </div>
      <div class="kpi-item">
        <div class="kpi-label">Avg Time to Resolution</div>
        <div class="kpi-value"><span id="aeAvgResolution">-</span><span class="kpi-unit">days</span></div>
      </div>
      <div class="kpi-item">
        <div class="kpi-label">Ongoing Events</div>
        <div class="kpi-value" id="aeOngoing">-</div>
      </div>
    </section>

    <section class="card">
      <h2>Events by Type</h2>
      <canvas id="aeTypeChart" height="140"></canvas>
    </section>

    <section class="card">
      <h2>Events by Severity</h2>
      <canvas id="aeSeverityChart" height="160"></canvas>
    </section>

    <section class="card wide">
      <h2>Adverse Events Over Time</h2>
      <canvas id="aeOverTimeChart" height="180"></canvas>
    </section>

    <section class="card">
      <h2>Events by Location</h2>
      <canvas id="aeLocationChart" height="140"></canvas>
    </section>
  </main>

  <footer>
    <span>Powered by FastAPI + SQLite</span>
  </footer>

  <script src="./main.js"></script>
</body>
</html>
